<ui:FluentWindow x:Class="AMWin_RichPresence.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:AMWin_RichPresence"
        xmlns:properties="clr-namespace:AMWin_RichPresence.Properties"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        mc:Ignorable="d"
        Icon="/Resources/AMWinRP.ico"
        ExtendsContentIntoTitleBar="True"
        Title="{x:Static properties:Localisation.Settings_Title}" ResizeMode="CanResize" WindowStartupLocation="CenterScreen" MinWidth="400" Width="600" Height="850">
    <Grid TextElement.FontSize="14">
        <ui:TitleBar/>
        <DockPanel>
            <Border DockPanel.Dock="Top" Height="80" Padding="10" Margin="0 5 0 10">
                <DockPanel Margin="10 5 0 0">
                    <Image HorizontalAlignment="Left" Margin="0 0 0 0" Source="/Resources/AMWinRP-128x.png"/>
                    <StackPanel Orientation="Vertical" Grid.Column="1" Margin="16 0 0 0">
                        <TextBlock FontWeight="Bold" FontSize="20" Margin="0 0 0 3" Text="{x:Static local:Constants.ApplicationStylisedName}"/>
                        <TextBlock x:Name="TextBlock_VersionString" VerticalAlignment="Bottom" FontWeight="Light" FontSize="16" Text="{x:Static local:Constants.ProgramVersion}"/>
                    </StackPanel>
                    <Button
                        Grid.Column="2" Width="35" Margin="0 10 10 0" VerticalAlignment="Bottom"
                        Background="Transparent" BorderThickness="0" Padding="0" Cursor="Hand" HorizontalAlignment="Right"
                        Click="GitHubButton_Click"
                    >
                        <Image x:Name="Image_GitHub" Source="/Resources/GitHub_Invertocat_Black.png" />
                    </Button>
                </DockPanel>
            </Border>
            <ui:NavigationView DockPanel.Dock="Left" 
                               IsBackButtonVisible="Collapsed" IsFooterSeparatorVisible="False" IsTopSeparatorVisible="False" OpenPaneLength="130" PaneDisplayMode="Left" IsPaneOpen="True">
                <ui:NavigationView.MenuItems>
                    <ui:NavigationViewItem
                        x:Name="NavItemGeneral"
                        Content="{x:Static properties:Localisation.Settings_General_SectionTitle}"
                        Icon="{ui:SymbolIcon Home24}" 
                        Click="NavItemGeneral_Click"/>
                    <ui:NavigationViewItem
                        x:Name="NavItemDiscord"
                        Content="{x:Static properties:Localisation.Settings_Discord_SectionTitleShort}"
                        Icon="{ui:SymbolIcon XboxController48}" 
                        Click="NavItemDiscord_Click"/>
                    <ui:NavigationViewItem
                        x:Name="NavItemScrobbling"
                        Content="{x:Static properties:Localisation.Settings_Scrobbling_SectionTitle}"
                        Icon="{ui:SymbolIcon Headphones20}" 
                        Click="NavItemScrobbling_Click"/>
                </ui:NavigationView.MenuItems>
                <ui:NavigationView.ContentOverlay>
                    <Border>
                        <ScrollViewer x:Name="ScrollViewerSettings" VerticalScrollBarVisibility="Auto">
                            <StackPanel x:Name="ScrollViewerTop" Orientation="Vertical" Margin="20 0 25 20">

                                <!-- General settings -->
                                <TextBlock x:Name="SectionTitleGeneral"
                                           FontSize="18" FontWeight="Bold" Padding="0 15 0 5" Margin="0 0 0 7" VerticalAlignment="Top" 
                                           Text="{x:Static properties:Localisation.Settings_General_SectionTitle}"/>

                                <CheckBox x:Name="CheckBox_RunOnStartup" 
                                        IsChecked="{Binding Source={x:Static properties:Settings.Default}, Path=RunOnStartup, Mode=TwoWay}" 
                                        Click="CheckBox_RunOnStartup_Click" 
                                        Content="{x:Static properties:Localisation.Settings_General_RunOnWindowsStartup}"/>

                                <CheckBox x:Name="CheckBox_CheckForUpdatesOnStartup" 
                                          IsChecked="{Binding Source={x:Static properties:Settings.Default}, Path=CheckForUpdatesOnStartup, Mode=TwoWay}" 
                                          Click="CheckBox_CheckForUpdatesOnStartup_Click" 
                                          Content="{x:Static properties:Localisation.Settings_General_UpdateOnStartup}"/>

                                <CheckBox x:Name="CheckBox_ClassicalComposerAsArtist" 
                                          IsChecked="{Binding Source={x:Static properties:Settings.Default}, Path=ClassicalComposerAsArtist, Mode=TwoWay}" 
                                          Click="CheckBox_ClassicalComposerAsArtist_Click"
                                          Content="{x:Static properties:Localisation.Settings_General_ComposerAsArtist}"/>
                                <TextBlock 
                                    Margin="40 0 0 10" FontSize="12"  VerticalAlignment="Center" TextWrapping="Wrap"
                                    Text="{x:Static properties:Localisation.Settings_General_ComposerAsArtist_Description}"/>

                                <StackPanel Orientation="Horizontal" Margin="10 10 0 2">
                                    <TextBlock
                                        x:Name="TextBlock_LanguageLabel"
                                        VerticalAlignment="Center"
                                        Text="Language"/>
                                    <ComboBox
                                        x:Name="ComboBox_Language"
                                        Width="170"
                                        Margin="10 0 0 0"
                                        SelectionChanged="ComboBox_Language_SelectionChanged">
                                        <ComboBoxItem x:Name="ComboBoxItem_LanguageSystem" Tag="" Content="System default"/>
                                        <ComboBoxItem x:Name="ComboBoxItem_LanguageEnglish" Tag="en" Content="English"/>
                                        <ComboBoxItem x:Name="ComboBoxItem_LanguageTurkish" Tag="tr" Content="Turkce"/>
                                        <ComboBoxItem x:Name="ComboBoxItem_LanguageKorean" Tag="ko" Content="Korean"/>
                                    </ComboBox>
                                </StackPanel>
                                <TextBlock
                                    x:Name="TextBlock_LanguageDescription"
                                    Margin="10 5 0 10" FontSize="12" VerticalAlignment="Center" TextWrapping="Wrap"
                                    Text="Restart the app after changing the language."/>

                                <StackPanel Orientation="Horizontal" Margin="10 10 0 2">
                                    <TextBlock 
                                        VerticalAlignment="Center"
                                        Text="{x:Static properties:Localisation.Settings_General_AppleMusicRegion}"/>
                                    <TextBox 
                                        x:Name="AppleMusicRegion" Margin="10 0 0 0" Padding="7 6 0 0" Width="40" HorizontalAlignment="Left" TextWrapping="Wrap" FontFamily="Cascadia Code" FontSize="16" MaxLength="2"
                                        TextChanged="AppleMusicRegion_TextChanged" 
                                        LostFocus="AppleMusicRegion_LostFocus" 
                                        KeyDown="AppleMusicRegion_KeyDown">
                                    </TextBox>
                                    <TextBlock x:Name="AppleMusicRegionStatusIcon" FontFamily="Segoe Fluent Icons" Margin="12 5 0 0"  FontSize="24" Text="&#xE783;" ToolTip="{x:Static properties:Localisation.Settings_General_TooltipAppleMusicRegionError}"/>
                                </StackPanel>
                                <TextBlock 
                                    Margin="10 5 0 10" FontSize="12"  VerticalAlignment="Center" TextWrapping="Wrap"
                                    Text="{x:Static properties:Localisation.Settings_General_AppleMusicRegion_Description}"/>

                                <!-- Discord RP settings -->
                                <TextBlock x:Name="SectionTitleDiscord"
                                    FontSize="18" FontWeight="Bold" Padding="0 15 0 5" Margin="0 10 0 7" VerticalAlignment="Top" 
                                    Text="{x:Static properties:Localisation.Settings_Discord_SectionTitle}"/>

                                <CheckBox 
                                    x:Name="CheckBox_EnableDiscordRP" 
                                    IsChecked="{Binding Source={x:Static properties:Settings.Default}, Path=EnableDiscordRP, Mode=TwoWay}" 
                                    Click="CheckBox_EnableDiscordRP_Click" 
                                    Content="{x:Static properties:Localisation.Settings_Discord_EnableRP}"/>

                                <CheckBox 
                                    x:Name="CheckBox_EnableRPCoverImages" 
                                    IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableDiscordRP}" 
                                    IsChecked="{Binding Source={x:Static properties:Settings.Default}, Path=EnableRPCoverImages, Mode=TwoWay}" 
                                    Click="CheckBox_EnableRPCoverImages_Click" 
                                    Content="{x:Static properties:Localisation.Settings_Discord_ShowAlbumArt}"/>

                                <CheckBox
                                    x:Name="CheckBox_ShowRPWhenMusicPaused" 
                                    IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableDiscordRP}" 
                                    IsChecked="{Binding Source={x:Static properties:Settings.Default}, Path=ShowRPWhenMusicPaused, Mode=TwoWay}" 
                                    Click="CheckBox_ShowRPWhenMusicPaused_Click" 
                                    Content="{x:Static properties:Localisation.Settings_Discord_ShowWhenPaused}"/>

                                <CheckBox 
                                    x:Name="CheckBox_ShowAppleMusicIcon" 
                                    IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableDiscordRP}" 
                                    IsChecked="{Binding Source={x:Static properties:Settings.Default}, Path=ShowAppleMusicIcon, Mode=TwoWay}" 
                                    Click="CheckBox_ShowAppleMusicIcon_Click" 
                                    Content="{x:Static properties:Localisation.Settings_Discord_ShowAppleMusicIcon}"/>
                                <TextBlock 
                                    Margin="40 0 0 10" FontSize="12"  VerticalAlignment="Center" TextWrapping="Wrap"
                                    Text="{x:Static properties:Localisation.Settings_Discord_ShowAppleMusicIcon_Description}"/>

                                <StackPanel Orientation="Horizontal" Margin="10 7 0 7">
                                    <TextBlock 
                                        VerticalAlignment="Center" 
                                        Margin="0 0 10 2"
                                        Text="{x:Static properties:Localisation.Settings_Discord_UserStatusDisplay}"/>
                                    <ComboBox 
                                        x:Name="ComboBox_RPDisplayChoice" 
                                        IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableDiscordRP}" 
                                        SelectedIndex="{Binding Source={x:Static properties:Settings.Default}, Path=RPDisplayChoice, Mode=TwoWay}" 
                                        SelectionChanged="ComboBox_RPDisplayChoice_SelectionChanged"
                                    >
                                        <!-- The order of these items matters! (check the enum in AppleMusicDiscordClient.cs) -->
                                        <ComboBoxItem Content="{x:Static properties:Localisation.Settings_Discord_UserStatusDisplay_Artist}"/>
                                        <ComboBoxItem Content="{x:Static properties:Localisation.Settings_Discord_UserStatusDisplay_AppleMusic}"/>
                                        <ComboBoxItem Content="{x:Static properties:Localisation.Settings_Discord_UserStatusDisplay_SongName}"/>
                                    </ComboBox>
                                </StackPanel>

                                <!-- Discord RP settings: Lyrics (experimental) -->
                                <ui:Card Margin="0 15 0 5">
                                    <StackPanel>
                                        <DockPanel Margin="0 0 0 7">
                                            <TextBlock 
                                                FontSize="16" FontWeight="SemiBold" VerticalAlignment="Top" 
                                                IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableDiscordRP}"
                                                Text="{x:Static properties:Localisation.Settings_Discord_Lyrics_SectionTitle}"/>
                                            <StackPanel HorizontalAlignment="Right">
                                                <ui:ToggleSwitch 
                                                    x:Name="CheckBox_EnableSyncLyrics" 
                                                    IsChecked="{Binding Source={x:Static properties:Settings.Default}, Path=EnableSyncLyrics, Mode=TwoWay}" 
                                                    Click="CheckBox_EnableSyncLyrics_Click"/>
                                            </StackPanel>
                                        </DockPanel>

                                        <TextBlock 
                                            Margin="0 0 0 15" FontSize="12"  VerticalAlignment="Center" TextWrapping="Wrap"
                                            Text="{x:Static properties:Localisation.Settings_Discord_Lyrics_EnableLyrics}"/>
                                        
                                        <CheckBox 
                                            x:Name="CheckBox_ExtendLyricsLine" 
                                            IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableSyncLyrics}"
                                            IsChecked="{Binding Source={x:Static properties:Settings.Default}, Path=ExtendLyricsLine, Mode=TwoWay}" 
                                            Click="CheckBox_ExtendLyricsLine_Click" 
                                            Content="{x:Static properties:Localisation.Settings_Discord_Lyrics_ShowDuringBreak}"/>
                                        <TextBlock 
                                            Margin="40 0 0 10" FontSize="12"  VerticalAlignment="Center" TextWrapping="Wrap"
                                            Text="{x:Static properties:Localisation.Settings_Discord_Lyrics_ShowDuringBreak_Description}"/>

                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0 12 0 0">
                                            <Button 
                                                x:Name="Button_OpenLyricCache" Margin="0 0 15 0" 
                                                Content="{x:Static properties:Localisation.Settings_Discord_Lyrics_OpenCache}" 
                                                Click="Button_OpenLyricCache_Click" />
                                            <Button 
                                                x:Name="Button_DeleteLyricCache"
                                                Content="{x:Static properties:Localisation.Settings_Discord_Lyrics_ClearCache}" 
                                                Click="Button_DeleteLyricCache_Click"/>
                                        </StackPanel>   
                                    </StackPanel>
                                </ui:Card>
                                
                                <!-- Scrobbling settings -->
                                <TextBlock 
                                    x:Name="SectionTitleScrobbling"
                                    Padding="0 15 0 5" Margin="0 20 0 7" FontWeight="Bold" FontSize="18" 
                                    Text="{x:Static properties:Localisation.Settings_Scrobbling_SectionTitle}"/>

                                <CheckBox 
                                    x:Name="CheckBox_LastfmCleanAlbumName"
                                    IsChecked="{Binding Source={x:Static properties:Settings.Default}, Path=LastfmCleanAlbumName, Mode=TwoWay}" 
                                    Click="CheckBox_LastfmCleanAlbumName_Click" 
                                    Content="{x:Static properties:Localisation.Settings_Scrobbling_CleanAlbumName}"/>
                                <TextBlock 
                                    Margin="40 0 0 10" FontSize="12"  VerticalAlignment="Center" TextWrapping="Wrap"
                                    Text="{x:Static properties:Localisation.Settings_Scrobbling_CleanAlbumName_Description}"/>

                                <CheckBox 
                                    x:Name="CheckBox_LastfmScrobblePrimary" Margin="0 2 0 0" 
                                    IsChecked="{Binding Source={x:Static properties:Settings.Default}, Path=LastfmScrobblePrimaryArtist, Mode=TwoWay}" 
                                    Click="CheckBox_LastfmScrobblePrimary_Click" 
                                    Content="{x:Static properties:Localisation.Settings_Scrobbling_ScrobblePrimaryArtist}"/>

                                <CheckBox 
                                    x:Name="CheckBox_ScrobblePreferAppleMusicWebDuration" 
                                    Margin="0 2 0 0" IsChecked="{Binding Source={x:Static properties:Settings.Default}, Path=ScrobblePreferAppleMusicWebDuration, Mode=TwoWay}" 
                                    Checked="CheckBox_ScrobblePreferAppleMusicWebDuration_Checked"
                                    Content="{x:Static properties:Localisation.Settings_Scrobbling_SongDurationChoice}"/>
                                <TextBlock 
                                    Margin="40 0 0 10" FontSize="12"  VerticalAlignment="Center" TextWrapping="Wrap"
                                    Text="{x:Static properties:Localisation.Settings_Scrobbling_SongDurationChoice_Description}"/>

                                <StackPanel Orientation="Horizontal" Margin="10 10 0 5">
                                    <TextBlock VerticalAlignment="Center" Padding="0 0 0 1" 
                                               Text="{x:Static properties:Localisation.Settings_Scrobbling_ScrobbleTime}"/>
                                    <TextBox 
                                        x:Name="ScrobbleMaxTime" Width="60" Margin="10 0 7 2" Padding="7 5 7 5" TextWrapping="Wrap" HorizontalContentAlignment="Right"
                                        MaxLines="1" MaxLength="5"
                                        Text="{Binding Source={x:Static properties:Settings.Default}, Path=ScrobbleMaxWait}"
                                        TextChanged="ScrobbleMaxTime_TextChanged"/>
                                    <TextBlock VerticalAlignment="Center" Padding="0 0 0 1" 
                                               Text="{x:Static properties:Localisation.Settings_TimeUnitSeconds}"/>
                                </StackPanel>
                                <TextBlock 
                                    Margin="10 0 0 10" FontSize="12"  VerticalAlignment="Center" TextWrapping="Wrap"
                                    Text="{x:Static properties:Localisation.Settings_Scrobbling_ScrobbleTime_Description}"/>

                                <!-- Scrobbling settings: Last.FM -->
                                <ui:Card Margin="0 15 0 5">
                                    <StackPanel>
                                        <DockPanel Margin="0 0 0 10">
                                            <TextBlock
                                                 FontSize="16" FontWeight="SemiBold"
                                                Text="{x:Static properties:Localisation.Settings_Scrobbling_LastFM_SectionTitle}"/>
                                            <StackPanel HorizontalAlignment="Right">
                                            <ui:ToggleSwitch 
                                                x:Name="CheckBox_LastfmEnable" Margin="0 2 0 10"
                                                IsChecked="{Binding Source={x:Static properties:Settings.Default}, Path=LastfmEnable, Mode=TwoWay}"
                                                Click="CheckBox_LastfmEnable_Click"/>
                                            </StackPanel>
                                        </DockPanel>
                                        <TextBlock 
                                            VerticalAlignment="Center"
                                            Text="{x:Static properties:Localisation.Settings_Scrobbling_LastFM_ApiKey}"/>
                                        <TextBox 
                                            x:Name="LastfmAPIKey" Margin="0 7 0 10" TextWrapping="Wrap"
                                            IsEnabled="{Binding IsChecked, ElementName=CheckBox_LastfmEnable}" 
                                            Text="{Binding Source={x:Static properties:Settings.Default}, Path=Default.LastfmAPIKey}"/>

                                        <TextBlock VerticalAlignment="Center" 
                                           Text="{x:Static properties:Localisation.Settings_Scrobbling_LastFM_ApiSecret}"/>
                                        <TextBox 
                                            x:Name="LastfmSecret" Margin="0 7 0 10" TextWrapping="Wrap"
                                            IsEnabled="{Binding IsChecked, ElementName=CheckBox_LastfmEnable}" 
                                            Text="{Binding Source={x:Static properties:Settings.Default}, Path=Default.LastfmSecret}"/>

                                        <TextBlock 
                                            VerticalAlignment="Center" 
                                            Text="{x:Static properties:Localisation.Settings_Scrobbling_LastFM_Username}"/>
                                        <TextBox 
                                            x:Name="LastfmUsername" Margin="0 7 0 10" TextWrapping="Wrap"
                                            IsEnabled="{Binding IsChecked, ElementName=CheckBox_LastfmEnable}" 
                                            Text="{Binding Source={x:Static properties:Settings.Default}, Path=Default.LastfmUsername}"/>

                                        <TextBlock
                                            VerticalAlignment="Center"
                                            Text="{x:Static properties:Localisation.Settings_Scrobbling_LastFM_Password}"/>
                                        <PasswordBox 
                                            x:Name="LastfmPassword"  Margin="0 7 0 10" VerticalAlignment="Center"
                                            PasswordChar="●"
                                            IsEnabled="{Binding IsChecked, ElementName=CheckBox_LastfmEnable}" />

                                        <Button 
                                            x:Name="SaveLastFMCreds" Margin="0 7 0 0" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                            IsEnabled="{Binding IsChecked, ElementName=CheckBox_LastfmEnable}"
                                            Content="{x:Static properties:Localisation.Settings_Scrobbling_LastFM_SaveCredentials}" 
                                            Click="SaveLastFMCreds_Click" />
                                    </StackPanel>
                                </ui:Card>

                                <!-- Scrobbling settings: ListenBrainz -->
                                <ui:Card Margin="0 15 0 5">
                                    <StackPanel>
                                        <DockPanel Margin="0 0 0 10">
                                            <TextBlock
                                                FontSize="16" FontWeight="SemiBold"
                                                Text="{x:Static properties:Localisation.Settings_Scrobbling_ListenBrainz_SectionTitle}"/>
                                            <StackPanel HorizontalAlignment="Right">
                                                <ui:ToggleSwitch 
                                                    x:Name="CheckBox_ListenBrainzEnable" VerticalAlignment="Center" Margin="0 2 0 10"
                                                    IsChecked="{Binding Source={x:Static properties:Settings.Default}, Path=ListenBrainzEnable, Mode=TwoWay}"
                                                    Click="CheckBox_ListenBrainzEnable_Click"/>
                                            </StackPanel>
                                        </DockPanel>
                                        <TextBlock 
                                            VerticalAlignment="Center"
                                            Text="{x:Static properties:Localisation.Settings_Scrobbling_ListenBrainz_UserToken}"/>
                                        <TextBox 
                                            x:Name="ListenBrainzUserToken" Margin="0 7 0 10" 
                                            IsEnabled="{Binding IsChecked, ElementName=CheckBox_ListenBrainzEnable}" 
                                            Text="{Binding Source={x:Static properties:Settings.Default}, Path=Default.ListenBrainzUserToken, Mode=TwoWay}" 
                                            TextWrapping="Wrap"/>               

                                        <Button x:Name="SaveListenBrainzCreds" Margin="0 7 0 0" VerticalAlignment="Center" HorizontalAlignment="Right" 
                                            IsEnabled="{Binding IsChecked, ElementName=CheckBox_ListenBrainzEnable}" 
                                            Content="{x:Static properties:Localisation.Settings_Scrobbling_LastFM_SaveCredentials}"
                                            Click="SaveListenBrainzCreds_Click" />
                                    </StackPanel>
                                </ui:Card>
                            </StackPanel>
                        </ScrollViewer>
                    </Border>
                </ui:NavigationView.ContentOverlay>
            </ui:NavigationView>
        </DockPanel>
    </Grid>
</ui:FluentWindow>
